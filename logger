use File::Basename;

my $log = "$ENV{HOME}/logs/" . basename($0) . ".log";
sub do_log {
	my $line = "[" . localtime() . "] " . shift . "\n";

	warn $line;
	open(my $ofh, ">>", $log) or die "Can't open $log: $!";
	print $ofh $line;
	close $ofh;
}

do_log('This is a message without a category.');
do_log('[WARNING] This is a warning message.');
do_log('[ERROR] This is an error message.');

